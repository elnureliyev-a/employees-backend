"use strict";function p(){if("webkit"in window)throw new Error("A CommunicationBridge has already been established");return new Promise((e,s)=>{try{let n=new Set;Object.defineProperty(window,"webkit",{value:{messageHandlers:{bridge:{postMessage(r){n.forEach(i=>i(r))}}}},writable:!1});let a;Object.defineProperty(window,"bridge",{get(){return a},set(r){a=r,e({send(i){r.receive(i)},onDidReceiveMessage(i){return n.add(i),{dispose(){n.delete(i)}}}})}})}catch(n){s(n)}})}var d=class{containerElement;iconElement;messageElement;constructor(){this.containerElement=h(),this.iconElement=v(),this.messageElement=b(),this.containerElement.appendChild(this.iconElement),this.containerElement.appendChild(this.messageElement),window.document.body.appendChild(this.containerElement)}show(s){this.messageElement.textContent=s,this.containerElement.style.display="flex"}hide(){this.containerElement.style.display="none"}};function h(){let e=document.createElement("div");return e.style.backgroundColor="var(--vscode-editor-background)",e.style.color="var(--vscode-foreground)",e.style.fontFamily="var(--vscode-font-family)",e.style.fontWeight="var(--vscode-font-weight)",e.style.width="100%",e.style.height="100%",e.style.display="none",e.style.gap="10px",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center",e.style.position="absolute",e.style.top="0",e.style.left="0",e}function v(){let e=document.createElement("span");return e.className="codicon codicon-error",e.style.color="var(--vscode-editorError-foreground)",e.style.fontSize="48px",e}function b(){let e=document.createElement("span");return e.style.fontSize="14px",e}var c=class{body;observer;constructor(){this.body=document.body,this.observer=new MutationObserver(s=>{for(let n of s)n.type==="attributes"&&n.attributeName==="class"&&this.updateTheme()})}updateTheme(){this.body.classList.contains("vscode-dark")?this.body.setAttribute("data-color-scheme","dark"):this.body.classList.contains("vscode-light")?this.body.setAttribute("data-color-scheme","light"):this.body.classList.contains("vscode-high-contrast")&&(this.body.classList.contains("vscode-high-contrast-light")?this.body.setAttribute("data-color-scheme","light"):this.body.setAttribute("data-color-scheme","dark"))}start(){this.observer.observe(this.body,{attributes:!0,subtree:!1,attributeFilter:["class"]})}stop(){this.observer.disconnect()}};document.getElementById("_defaultStyles")?.remove();var m=new c;m.updateTheme();m.start();var u=document.createElement("style");u.textContent=`a {
    pointer-events: none;
}`;document.head.appendChild(u);p().then(async e=>{let s=acquireVsCodeApi(),n,a,r=new d;e.onDidReceiveMessage(t=>{switch(t.type){case"rendered":if(a){setTimeout(()=>{e.send({type:"contentUpdate",data:a}),a=void 0},1);break}s.postMessage({type:"rendered"});break}}),window.addEventListener("message",t=>{if(typeof t.data!="object"||!("type"in t.data))return;let o=t.data;switch(o.type){case"update-content":i(o.content);break}});function i(t){if(t.type==="render-node"){y();let o=t.renderNode,l=(()=>{switch(o.kind){case"symbol":case"article":return"/live/documentation";case"overview":return"/live/tutorials-overview";default:return"/live/tutorials"}})();n!==l?(n=l,a=o,e.send({type:"navigation",data:l})):e.send({type:"contentUpdate",data:o})}else g(t.errorMessage),s.postMessage({type:"rendered"})}function g(t){let o=window.document.getElementById("app");o&&(o.style.display="none"),r.show(t)}function y(){let t=window.document.getElementById("app");t&&(t.style.display="block"),r.hide()}s.postMessage({type:"loaded"})});
//# sourceMappingURL=index.js.map
